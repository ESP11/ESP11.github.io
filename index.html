<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>ES - P11</title>
	<meta name="description" content="Documentation">
	<meta name="author" content="valthemes.com">
	<meta name="format-detection" content="telephone=no">
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=latin,cyrillic' rel='stylesheet'
		type='text/css'>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/prettify.css">
	<link rel="stylesheet" type="text/css" href="css/normalize.css">

	<style>
		.avatar {
			border-radius: 50%;
		}

		table,
		th,
		td {
			border: 1px solid black;
			border-collapse: collapse;
		}

		th,
		td {
			padding: 10px;
		}
	</style>

</head>

<body>
	<header>
		<div class="container">
			<div class="row">
				<div class="col-lg-2 col-xs-12 left">
					<div id="logo">
						<img src="images/logo.png" alt="vdoc">
					</div>
				</div>
				<div class="col-lg-8 col-md-7 col-xs-12">
					<div class="slogan"> Firefighter's Tracker </div>
				</div>
				<div class="col-lg-2 col-md-3 col-xs-12 right">
					<a class="btn" href="">Milestones Docs</a>
				</div>
			</div>
		</div>
	</header>
	<section class="content">
		<div class="container">
			<div class="content-wrap">
				<div class="row">
					<aside>
						<div class="menu-box">
							<h4>Navigation</h4>
							<nav>
								<ul>
									<li><a href="#personas" class="current">Personas</a></li>
									<!-- <li><a href="#vision">Vision</a></li> -->
									<li><a href="#specification">Specification</a></li>
									<li><a href="#architecture">Architecture</a></li>
									<li><a href="#tests">Tests And Acceptance</a></li>
									<li><a href="#developer">Developer</a></li>
									<li><a href="#manual">Manual</a></li>
									<li><a href="#video">Video</a></li>
									<li><a href="#assessment">Assessment</a></li>
									<li><a href="#timesheet">Timesheet</a></li>
									<li><a href="#team">Team</a></li>
								</ul>
							</nav>
						</div>
					</aside>
					<div class="content-info">
						<div class="section-txt" id="personas">
							<!--PERSONAS-->
							<h2>Personas</h2>
							<!--Personas-->
							<p><b>
									<h5>Personas</h5>
								</b></p>
							<ul>
								<li><b>André</b></li>
								<p>
									André is a 60 years old firefighter that due to his age and physical problems cannot fight fires
									anymore.
								</p>
								<p>
									André has a lot of experience fighting fires, went through several difficulties while fighting them,
									so
									his job now is to manage firemans to make sure that during a fire, all the firemen are safe and in
									healthy conditions.
								</p>
								<p>
									To make sure that André is making a good job he would like to have a system where it would be possible
									to get detailed info about the field, previous fires in that field and every fireman conditions.
								</p>
								<li><b>Luís</b></li>
								<p>
									Luís is a 20 years old student that lives in Serra do Caramulo and he spends all his summer holidays
									in his house.
								</p>
								<p>
									Every summer, there’s a dangerous risk of fire in the forest close to his house. In the last summer,
									there was a fire that almost reached his house and he went help firemen fighting the fire!
								</p>
								<p>
									As it happens almost every summer, Luís would like to have some kind of valid source information that
									would provide information about the fires in real time, so he could make sure that his property is
									safe.
								</p>
							</ul>

							<p><b>
									<h5>Scenarios</h5>
								</b></p>
							<!--Scenarios-->
							<ul>
								<li><b>A fire is starting and André wants to monitor his team:</b></li>
								<p>
									As soon as a fire start and the firemen reach the field, the firemen team leader which monitors
									their actions during the fire through the Web App, will be able to set and get each fireman position
									easily, their healthy conditions and the field conditions as well.
								</p>
								<p>
									This information will avoid dangerous exposures to heat and high levels of gases such C02,
									which will improve the welfare of the firemen during the fire and André will have a better perception
									of what’s happening in real time and what is the best move to take.
								</p>
								<li><b>Luís was watching the news and saw that a fire close to his house as started:</b></li>
								<p>
									Luís was aware of the existence of a fire near his home, with de Web App he can see the state of the
									fire through time graphs built from information given by firefighters sensors who are fighting on the
									ground.
								</p>
							</ul>

							<p><b>
									<h5>Motivation</h5>
								</b></p>
							<!--Motivation-->
							<ul>
								<li><b>André - Fireman - 60 years old </b></li>
								<ul>
									<li>
										Would like to improve the conditions of the firemen during the fire improving his
										monitoring.
									</li>
									<li>
										Would like to know more about past fires that happened in some fields.
									</li>
								</ul>
								<li><b>Luís - Student - 20 years old</b></li>
								<ul>
									<li>
										Would like to get all the detailed info about the fires that
										happens close to his house.
									</li>
								</ul>
							</ul>

							<p><b>
									<h5>Goals</h5>
								</b></p>
							<!--Goals-->
							<ul>
								<p>
									The goal is to develop an intuitive web app where it will be
									possible to locate and check every fireman's position, heart rate,
									CO2 level and field temperature and last but not least, it will provide
									dynamic dashboards from actual and past fires.
								</p>
							</ul>

						</div>

						<div class="section-txt" id="specification">
							<!-- SPECIFICATION-->
							<h3>Specification</h3>
							<p>
								<b>
									<h5>Features</h5>
								</b>
							</p>
							
							<!--Features-->
							
							<ul>
								<p>Dashboard webPage with the following information:</p>
								<ul>
									<li>Dynamic graphic with firefighters' Heart rate values</li>
									<li>Dynamic graphic with firefighters' Environment values</li>
									<li>Dynamic graphic with firefighters' GPS tracker values</li>
								</ul>
								
								<p>Interative Map with the following information:</p>
								<ul>
									<li>Dymamic markers representing actual firefighters location</li>
									<li>Small windown with firefighters' information when pressed a marker</li>
								</ul>
								
							</ul>

							<p><b>
									<h5>Requirements</h5>
								</b></p>
							<!--Requirements-->
							<ul>
								<li>Internet Connection.</li>
								<li>Web Browser.</li>
							</ul>

							<center>
							<p><b>
									<h5>Use Cases</h5>
								</b></p>
							<!--Use Cases-->
							<table style="width:70%">
								
								<!--Use case 1-->
								<tr>
									<th>ID and Name</th>
									<th>UC1 - Check firefighters team position and vital levels</th>
								</tr>
								<tr>
									<td>Primary Actor</td>
									<td>User</td>
								</tr>
								<tr>
									<td>Description</td>
									<td>User wants to check is team positions and vital levels</td>
								</tr>
								<tr>
									<td>Normal Flow</td>
									<td>
										<li>User accesses the web App</li>
										<li>User selects the map tab</li>
										<li>User search in map the position of his team</li>
										<li>Double click on each firefighter icon on the map, User can see vital levels values</li>
									</td>
								</tr>
								<tr>
									<td>Preconditions</td>
									<td>Pre - 1: Sensors on
										<br>
										Pre - 2: Firefighters in the field
										</br>
									</td>
								</tr>
								<tr>
									<td>Postconditions</td>
									<td>Pos - 1: firefighter icons visible on the map</td>
								</tr>
								<tr>
									<td>Priority</td>
									<td>High</td>
								</tr>
							</table>
							<br>
							<table style="width:70%">
								
								<!--Use case 2-->
								<tr>
									<th>ID and Name</th>
									<th>UC2 - Check fire state</th>
								</tr>
								<tr>
									<td>Primary Actor</td>
									<td>User</td>
								</tr>
								<tr>
									<td>Description</td>
									<td>User wants to check a particular fire state.</td>
								</tr>
								<tr>
									<td>Normal Flow</td>
									<td>
										<li>User accesses the web App</li>
										<li>User selects the map tab</li>
										<li>User identifies in map the position of the fire</li>
										<li>User can see temporal graphics that shows statistics values like temperature and CO2 levels</li>
									</td>
								</tr>
								<tr>
									<td>Preconditions</td>
									<td>Pre - 1: fire appears on the map</td>
								</tr>
								<tr>
									<td>Postconditions</td>
									<td>Pos - 1: detailed info available.</td>
								</tr>
								<tr>
									<td>Priority</td>
									<td>High</td>
								</tr>
							</table>
							<br>
							<table style="width:70%">
								
								<!--Use case 3-->
								<tr>
									<th>ID and Name</th>
									<th>UC3 - See fires historic</th>
								</tr>
								<tr>
									<td>Primary Actor</td>
									<td>User</td>
								</tr>
								<tr>
									<td>Description</td>
									<td>User wants to check past fires.</td>
								</tr>
								<tr>
									<td>Normal Flow</td>
									<td>
										<li>User accesses the web App</li>
										<li>User selects Fires Historic tab</li>
										<li>User selects the place he is looking for</li>
										<li>User can see all info about previous fires</li>
									</td>
								</tr>
								<tr>
									<td>Preconditions</td>
									<td>None</td>
								</tr>
								<tr>
									<td>Postconditions</td>
									<td>Pos - 1: list of past fires is available</td>
								</tr>
								<tr>
									<td>Priority</td>
									<td>High</td>
								</tr>
							</table>
						</center>
						</div>
						<center>
						<div class="section-txt" id="architecture">
							<h3>Architecture</h3>
							<ul>
								<img src="images/architecture.png" class="center">
							</ul>
						</div>
						</center>
						<center>
						<div class="section-txt" id="tests">
							<h3>Tests And Acceptance</h3>
							
							<ul>
								<h4>Scenario 1: Firefighter Location</h4>
								<p>Given the firefighter number (ID)</p>
								<p>When I want to know where the firefighter is</p>
								<p>Then the firefighter appears on the map</p>

								<h4>Scenario 2: Firefighter Status</h4>
								<p>Given the firefighter number (ID)</p>
								<p>When I want to check the informations of the firefighter</p>
								<p>Then the firefighter status will appear on a window in the map</p>

								<h4>Scenario 3: Firefighter Information</h4>
								<p>Given the firefighter number (ID)</p>
								<p>When I want to check the firefighter global information</p>
								<p>Then the firefighter information about GPS, Environment and Heart Rate will appear on the dashboard</p>

								<h4>Scenario 4: Firefighter Heart Rate Alert</h4>
								<p>Given the firefighter number (ID) and his heart hate</p>
								<p>When I want to if firefighter' heart rate is above 100 bpm</p>
								<p>Then an alert will appear in the firefighter' window in the map</p>								
							</ul>

							<br>
							<p><h6>Command to run tests in MVN: mvn test</h6></p>
						</div>

						</center>

						<center>
						<div class="section-txt" id="developer">
							<h3>Developer</h3>
							
								<p><b>
									<h5>Runtime: 192.168.160.103</h5>
								</b></p>

								<!--Ports-->
								<table style="width:50%">
									<tr>
										<th>Ports</th>
										<th>Service</th>
									</tr>
									<tr>
										<td>11080:8080</td>
										<td>Service - Layer</td>
									</tr>
									<tr>
										<td>11300:3000</td>
										<td>FrontEnd</td>
									</tr>
									<tr>
										<td>9000</td>
										<td>Portainer</td>
									</tr>
									<tr>
										<td>2181:9092</td>
										<td>kafka</td>
									</tr>
									<tr>
										<td>2182</td>
										<td>zookeeper</td>
									</tr>
									<tr>
										<td>3307</td>
										<td>MySQL</td>
									</tr>
									<tr>
										<td>9200</td>
										<td>elk-elasticsearch</td>
									</tr>
									<tr>
										<td>5601</td>
										<td>elk-kibana</td>
									</tr>
									<tr>
										<td>11200</td>
										<td>logstash</td>
									</tr>
								</table>

								<p><b>
									<h5>Repository: 192.168.160.99:5000</h5>
								</b></p>

								<!--Repository-->
								<table style="width:50%">
									
									<tr>
										<th>Docker Image</th>
									</tr>
									<tr>
										<td>esp11-service-layer</td>
									</tr>
									<tr>
										<td>esp11-data-layer</td>
									</tr>
									<tr>
										<td>esp11-logstash</td>
									</tr>
									<tr>
										<td>esp11-frontend</td>
									</tr>
								</table>

									</br>
									<p><b><h5>Operational Information</h5></b></p>
									
										
									<p><b><h6>Jenkins Pipeline:</h6></b></p>

									<ul>
										<img src="images/jenkins.png" class="center">
									</ul>

									<p><b><h6>Jenkins File:</h6></b></p>

									<p>Our jenkins pipeline integrates our github project with github credentials and through the steps of each stage it deploys our java maven app (service layer) and our frontend made with nuxt.js framework.</p>
									<p>The stages of Jenkins pipeline are:</p>
									<p>1- Build Stage:</p>
									<p>This stage uses 'mvn clean package' plugin from maven which cleans the files and directories generated during the previous build.</p>
									<p>2- Test Stage:</p>
									<p>This stage uses 'mvn test' plugin from maven to run unit tests.</p>
									<p>3- Artifactory Deployment Stage:</p>
									<p>This stage uses 'mvn deploy' plugin from maven to deploy our maven app to artifactory repository.</p>
									<p>The settings.xml file is integrated in jenkins and in pom.xml we define where to deploy our maven app in artifactory.</p>
									<p>4- Build Docker Image Stage</p>
									<p>In this stage we make a parallel step where we build our java maven app Docker Image (Service_Layer setp) and our frontend Docker Image (Frontend step).</p>
									<p>Before the image builds, we access the runtime vm through our ssh credentials added on jenkins, and we run the 'docker_clear.sh' script which stops the docker containers and removes its respective images so we make sure all the changes made to each one of this layers will be deployed and it will not deploy old versions of it.</p>
									<p>After the image build, we tag each image and then we push it to Docker repository 192.168.160.99:5000.</p>
									<p>The difference between the two steps is:</p>
									<p>Service_layer step:</p>
									<p>The docker_clear script is runned and then we build a Docker Image that basically from openjdk:8-jre-alpine docker image it adds the jar file downloaded from artifactory.</p>
									<p>Frontend:</p>
									<p>The docker_clear script is runned and then we build a Docker Image that from node:current-slim docker image builds an image with all the frontend files within its dependencies.</p>
									<p>5- Runtime Deployment</p>
									<p>Another stage that contains parallel steps in which one we deploy our images on runtime vm using ssh credentials we run the Service layer and frontend containers.</p>
									</br>
									<p>To complement our Jenkins Pipeline, we added a choice parameter that allows to run the build with the test stage or not and we added the option of automatically run the build after a commit is done. </p>

									<p><b><h5>Credentials</h5></b></p>

									<h6>MySQL Credentials:</h6>
									<p><b>user:</b> esp11_db</p>
									<p><b>password:</b> cenas</p>

									<h6>Elasticsearch/Kibana Credentials:</h6>
									<p><b>user:</b> esp11</p>
									<p><b>password:</b> esp11password</p>

									<h6>Kafka Topics:</h6>
									<p>esp11_hr</p>
									<p>esp11_env</p>
									<p>esp11_gps</p>

						</div>
					</center>
					<center>
						<div class="section-txt" id="manual">
							<h3>Manual</h3>

							<h6>Localizations of the firefighters on the map:</h6>

							<ul>
								<img src="images/map1.png" class="center">
							</ul>

							<ul>
								<img src="images/map2.png" class="center">
							</ul>

							<h6>Dashboard with information about the firefighters:</h6>

							<ul>
								<img src="images/dashboard1.png" class="center">
							</ul>

							<ul>
								<img src="images/dashboard2.png" class="center">
							</ul>
							
							<h6>Notifications for the firefighters alarms:</h6>

							<ul>
								<img src="images/notification.png" class="center">
							</ul>
						</div>
					</center>
						<div class="section-txt" id="video">
							<h3>Video</h3>
							<iframe src="https://drive.google.com/file/d/1x0QJAIYsmwOP0eyQ3TlyI1urH_8ILsNW/preview" width="640" height="480"></iframe>
						</div>

						<div class="section-txt" id="assessment">
							<h3>Assessment</h3>
							<p>Looking back on what our project was, we can conclude that we built a robust application in which we implemented all the features we set out to implement.</p>
							<p>Therefore, we make a positive balance of the project and are satisfied with the final result.</p>
						</div>

						<div class="section-txt" id="timesheet">
							<h3>Timesheet</h3>
							<div>
								<iframe
									src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRIoYWAof_oLBnr-SR2abwbmT8DsIvMclpFNyz7rGlNiKj1QPReeDOzMdu_FuN7L-rgvHQZY3wDF_7H/pubhtml?gid=1077958398&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
							</div>
						</div>

						<div class="section-txt" id="team">
							<h3>Team</h3>
							<div class="row">
								<div class="col-lg-2 ml-auto text-center">
									Alexandre Lourenço
									<img class="avatar" src="ourPics/alex.jpg" alt="Avatar" style="width:150px" height="150" width="50">
								</div>
								<div class="col-lg-2 mr-auto text-center">
									Luís Santos
									<img class="avatar" src="ourPics/luis.jpg" alt="Avatar" style="width:200px" height="200" width="200">
								</div>
								<div class="col-lg-2 mr-auto text-center">
									Manuel Santos
									<img class="avatar" src="ourPics/manel.jpg" alt="Avatar" style="width:150px" height="150" width="50">
								</div>
								<div class="col-lg-2 mr-auto text-center">
									Nuno Félix
									<img class="avatar" src="ourPics/felix.jpeg" alt="Avatar" style="width:150px" height="150" width="50">
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	</section>
	<footer>
		<div class="container">
			<div class="row">
				<div class="col-lg-12 center">
					Firefighter's Data 2020 - ES
				</div>
			</div>
		</div>
	</footer>
	
	<script src="js/jquery.min.js"></script>
	<script src="js/prettify.min.js"></script>
	<script src="js/scripts.min.js"></script>
</body>

</html>